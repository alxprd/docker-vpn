#!/bin/bash

source ./vars

client_name=$1

echo "Create client's private key ($client_name):"
./build-key $client_name

# Anyone with access to client1.key will be able to access your VPN. To better protect against this scenario, you can issue ./build-key-pass client1 instead to build a client key which is encrypted with a passphrase.

rm -f ../clients/$client_name/ca.crt
rm -f ../clients/$client_name/client.crt
rm -f ../clients/$client_name/client.key

mkdir -p ../clients/$client_name

cp ./keys/ca.crt           ../clients/$client_name/ca.crt
cp ./keys/$client_name.crt ../clients/$client_name/client.crt
cp ./keys/$client_name.key ../clients/$client_name/client.key

#!/bin/sh

# Generate Diffie-Hellman parameter. This is a set of randomly
# generated data used when establishing Perfect Forward Secrecy
# during creation of a client's session key. The default size is
# 2048 bits, but OpenVPN's documentation recommends to use a prime
# size equivalent to your RSA key size. Since you will be using 4096
# bit RSA keys, create a 4096 bit DH prime. Depending on the size of
# your Linode, this could take approximately 10 minutes to complete.
# Note: According to OpenSSL's man page, genpkey -genparam supersedes dhparam.

rm -f /etc/openvpn/server/dhp4096.pem
openssl genpkey -genparam -algorithm DH -out /etc/openvpn/server/dhp4096.pem -pkeyopt dh_paramgen_prime_len:4096
